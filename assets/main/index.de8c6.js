window.__require=function t(e,o,i){function n(c,s){if(!o[c]){if(!e[c]){var p=c.split("/");if(p=p[p.length-1],!e[p]){var a="function"==typeof __require&&__require;if(!s&&a)return a(p,!0);if(r)return r(p,!0);throw new Error("Cannot find module '"+c+"'")}c=p}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return n(e[c][1][t]||t)},u,u.exports,t,e,o,i)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<i.length;c++)n(i[c]);return n}({bird:[function(t,e,o){"use strict";cc._RF.push(e,"6de22PJEupDTZBsDumSzb8W","bird");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpHeight=100,e.jumpDuration=.3,e.lastAction=null,e}return n(e,t),e.prototype.onBeginContact=function(){this.game.gameOver()},e.prototype.init=function(t){this.game=t,this.resetBird()},e.prototype.fly=function(){var t=this.node.getComponent(cc.RigidBody);t.type=cc.RigidBodyType.Static,this.node.angle=30,this.node.stopAction(this.lastAction),this.lastAction=cc.sequence(cc.sequence(cc.moveBy(this.jumpDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeSineOut()),cc.callFunc(function(){t.type=cc.RigidBodyType.Dynamic},this)),cc.rotateTo(this.jumpDuration,90).easing(cc.easeIn(1.2))),this.node.runAction(this.lastAction)},e.prototype.resetBird=function(){this.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static,this.node.angle=0,this.node.y=0,this.node.x=0},e.prototype.startBird=function(){this.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic},r([s],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],game:[function(t,e,o){"use strict";cc._RF.push(e,"50ce4n12F9C953aVuPhrYJH","game");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,p=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bird=null,e.ground=null,e.result=null,e.speed=200,e.gravity=cc.v2(0,-1960),e.isStart=!1,e.isOver=!1,e}return n(e,t),e.prototype.onLoad=function(){this.bird=this.bird.getComponent("bird"),this.bird.init(this),this.poolMng=this.poolMng.getComponent("pipePool"),this.poolMng.init(this),this.ground=this.ground.getComponent("ground"),this.ground.init(this),this.result=this.result.getComponent("result"),this.result.init(this),this.initPhysicsManager(),this.initListener()},e.prototype.initPhysicsManager=function(){var t=cc.director.getPhysicsManager();t.enabled=!0,t.gravity=this.gravity,cc.director.getCollisionManager().enabled=!0},e.prototype.initListener=function(){var t=this;this.node.on(cc.Node.EventType.MOUSE_DOWN,function(){t.isOver||(t.isStart||t.startGame(),t.bird.fly())})},e.prototype.startGame=function(){this.isStart=!0,this.bird.startBird(),this.createPipe(),cc.director.resume()},e.prototype.createPipe=function(){var t=this.poolMng.createPipe();t&&this.node.addChild(t)},e.prototype.passPipe=function(){this.result.addScore()},e.prototype.gameOver=function(){this.isOver=!0,console.log("\u78b0\u5230\u969c\u788d\uff0c\u6e38\u620f\u7ed3\u675f"),this.result.showResult(),cc.director.pause()},e.prototype.resStartGame=function(){this.isStart=!1,this.isOver=!1,this.result.initResult(),this.poolMng.reset(),this.bird.resetBird(),cc.director.resume()},r([p(cc.Component)],e.prototype,"bird",void 0),r([p(cc.Component)],e.prototype,"poolMng",void 0),r([p(cc.Component)],e.prototype,"ground",void 0),r([p(cc.Component)],e.prototype,"result",void 0),r([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],ground:[function(t,e,o){"use strict";cc._RF.push(e,"02aa85zspdFm4sE5OpMhSHY","ground");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,p=c.property,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){this.initGround()},e.prototype.init=function(t){this.game=t},e.prototype.initGround=function(){for(var t=-18;t<=18;++t){var e=cc.instantiate(this.groundTile);e.x=37*t,this.node.addChild(e)}},e.prototype.update=function(t){var e=this.game.speed*t;this.node.x-=e,this.node.x<-320&&(this.node.x+=301.5)},r([p(cc.Prefab)],e.prototype,"groundTile",void 0),r([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],pipePool:[function(t,e,o){"use strict";cc._RF.push(e,"2e561jpC7FNpauTOc3xqVrU","pipePool");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,p=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pool=null,e}return n(e,t),e.prototype.init=function(t){this.game=t,this.nodeList=[],this.initPool()},e.prototype.initPool=function(){this.pool=new cc.NodePool;for(var t=0;t<3;++t){var e=cc.instantiate(this.pipePrefab);this.pool.put(e),this.nodeList.push(e)}},e.prototype.createPipe=function(){var t=null;return(t=this.pool.size()>0?this.pool.get():cc.instantiate(this.pipePrefab)).getComponent("pipe").init(this.game),t},e.prototype.reusePipe=function(t){this.pool.put(t)},e.prototype.reset=function(){var t=this;this.nodeList.forEach(function(e){t.reusePipe(e)})},r([p(cc.Prefab)],e.prototype,"pipePrefab",void 0),r([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],pipe:[function(t,e,o){"use strict";cc._RF.push(e,"d126e0IW+JGDZ2mf92DezDC","pipe");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,p=c.property,a=function(t,e){return Math.random()*(e-t)+t},u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.topPipe=null,e.bottomPipe=null,e.isPass=!1,e}return n(e,t),e.prototype.init=function(t){this.game=t,this.isPass=!1,this.initPos()},e.prototype.initPos=function(){this.node.setPosition(cc.v2(360,0));var t=a(200,300),e=a(200,400),o=480-e+e/2;this.topPipe.node.height=e,this.topPipe.node.y=o;var i=896-e-t,n=416-i/2;this.bottomPipe.node.height=i,this.bottomPipe.node.y=-n;var r=this.topPipe.getComponent(cc.PhysicsBoxCollider);r.size=this.topPipe.node.getContentSize(),r.offset=cc.v2(0,0),r.apply();var c=this.bottomPipe.getComponent(cc.PhysicsBoxCollider);c.size=this.bottomPipe.node.getContentSize(),c.offset=cc.v2(0,0),c.apply()},e.prototype.update=function(t){var e=this.game.speed*t;this.node.x-=e,this.topPipe.getComponent(cc.RigidBody).syncPosition(!0),this.bottomPipe.getComponent(cc.RigidBody).syncPosition(!0),!this.isPass&&this.game&&this.game.bird.node.x>this.node.x&&(this.isPass=!0,this.game.passPipe(),this.game.createPipe()),this.isPass&&this.node.x<=-400&&this.game.poolMng.reusePipe(this.node)},r([p(cc.Sprite)],e.prototype,"topPipe",void 0),r([p(cc.Sprite)],e.prototype,"bottomPipe",void 0),r([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],result:[function(t,e,o){"use strict";cc._RF.push(e,"a30651p+npLA6pGBbaRHvDT","result");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,p=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxScore=0,e.score=0,e.scoreLabel=null,e.currentScoreLabel=null,e.bestScoreLabel=null,e}return n(e,t),e.prototype.init=function(t){this.game=t,this.initResult()},e.prototype.initResult=function(){this.updateScore(0),this.node.active=!1,this.scoreLabel.node.active=!0,this.scoreLabel.node.zIndex=999},e.prototype.addScore=function(){this.updateScore(this.score+1)},e.prototype.updateScore=function(t){this.score=t,this.scoreLabel.string=this.score.toString()},e.prototype.showResult=function(){this.maxScore=Math.max(this.maxScore,this.score),this.scoreLabel.node.active=!1,this.node.active=!0,this.node.zIndex=9999,this.currentScoreLabel.string=this.score.toString(),this.bestScoreLabel.string=this.maxScore.toString(),this.scoreLabel.node.active=!1},r([p(cc.Label)],e.prototype,"scoreLabel",void 0),r([p(cc.Label)],e.prototype,"currentScoreLabel",void 0),r([p(cc.Label)],e.prototype,"bestScoreLabel",void 0),r([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}]},{},["bird","game","ground","pipe","pipePool","result"]);