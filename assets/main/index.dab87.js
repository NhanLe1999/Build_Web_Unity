window.__require=function t(e,o,n){function i(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AddSpace:[function(t,e,o){"use strict";cc._RF.push(e,"1b0c2hY87tIoZgljIUctGvC","AddSpace");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Common/CallNative"),a=t("../Common/GameConfig"),s=cc._decorator,u=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=null,e.attempt=null,e}return i(e,t),e.prototype.onLoad=function(){this.title.string="Would you like to get\nextra 10 item spaces for free?",this.attempt.string="("+a.default.addSpaceAttempts+" attempts left today)"},e.prototype.onAddSpace=function(){c.default.onCallNative("showAds","space"),this.ClosePopUp()},e.prototype.ClosePopUp=function(){this.node.removeFromParent(),this.node.destroy()},r([p(cc.Label)],e.prototype,"title",void 0),r([p(cc.Label)],e.prototype,"attempt",void 0),r([u],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Common/CallNative":"CallNative","../Common/GameConfig":"GameConfig"}],AddToken:[function(t,e,o){"use strict";cc._RF.push(e,"a69aaBAA45HfpEngRXOeL3o","AddToken");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Common/CallNative"),a=t("../Common/GameConfig"),s=cc._decorator,u=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=null,e.attempt=null,e}return i(e,t),e.prototype.onLoad=function(){this.title.string="Would you like to get\nextra 5 Tokens for free?",this.attempt.string="("+a.default.addTokenAttempts+" attempts left today)"},e.prototype.onAddToken=function(){c.default.onCallNative("showAds","token"),this.ClosePopUp()},e.prototype.ClosePopUp=function(){this.node.removeFromParent(),this.node.destroy()},r([p(cc.Label)],e.prototype,"title",void 0),r([p(cc.Label)],e.prototype,"attempt",void 0),r([u],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Common/CallNative":"CallNative","../Common/GameConfig":"GameConfig"}],AutoRemove:[function(t,e,o){"use strict";cc._RF.push(e,"9c092xw6FRJCIUCMYA3P3nq","AutoRemove");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){var t=this;this.scheduleOnce(function(){t.node.removeFromParent(),t.node.destroy()},1)},r([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],BoxScript:[function(t,e,o){"use strict";cc._RF.push(e,"41fd1drbyRMGqQZSQ/kX8vd","BoxScript");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPrfb=[],e}return i(e,t),e.prototype.initPrefab=function(){for(var t=0;t<this.itemPrfb.length;t++)cc.instantiate(this.itemPrfb[t]).setParent(this.node)},r([s([cc.Prefab])],e.prototype,"itemPrfb",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],CallNative:[function(t,e,o){"use strict";cc._RF.push(e,"a5472OprORK/aMgALCgcthQ","CallNative");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GameManager"),r=t("../ShopScript"),c=cc._decorator,a=c.ccclass;c.property,cc.NativeCallJS=function(t,e){switch(console.log("iNativeCallJS------------------------\x3e   EVT "+typeof t+" = "+t+" ==>>    "+e),t+""){case"6":"space"==e?i.default.Instance.LayerMgr.AddSpace():"token"==e&&r.default.Instance.onAddToken()}};var s=function(){function t(){}return t.onCallNative=function(t,e){void 0===e&&(e=""),console.log("Call Native-=-=-= EVT "+t+" PARAMS "+e),cc.sys.os===cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onCallFromJavascript","(Ljava/lang/String;Ljava/lang/String;)V",t,e):cc.sys.os===cc.sys.OS_IOS&&cc.sys.isNative&&jsb.reflection.callStaticMethod("AppController","onCallFromJavaScript:andParams:",t,e)},n([a],t)}();o.default=s,cc._RF.pop()},{"../GameManager":"GameManager","../ShopScript":"ShopScript"}],Common:[function(t,e,o){"use strict";cc._RF.push(e,"af97dsADyhOU4ocaVEEbnEX","Common");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../GameManager"),c=t("./SoundManager"),a=t("./Utilities"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.savePlayerData=function(){var t={token:this.token,itemLimit:this.itemLimit,dailyClaimState:this.dailyClaimState,firstDayLogin:this.firstDayLogin,extraItemState:this.extraItemState},e=JSON.stringify(t);cc.sys.localStorage.setItem("Decor_Room_PlayerData",e)},e.loadPlayerData=function(t){var e;e=cc.sys.localStorage.getItem("Decor_Room_PlayerData"),this.initPlayerData(e),t&&t()},e.initPlayerData=function(t){if(null!=t&&"{}"!=t&&"string"==typeof t&&t.length>0){console.log("Decor_Room_PlayerData-loadPlayerData:"+t);var e=JSON.parse(t),o=e.token;this.token=null!=o?o:0;var n=e.itemLimit;this.itemLimit=null!=n?n:50;var i=e.dailyClaimState;this.dailyClaimState=null!=i?i:a.default.blankArrayOf(30);var r=e.extraItemState;this.extraItemState=null!=r?r:a.default.blankArrayOf(30);var c=e.firstDayLogin;null!=c?this.firstDayLogin=c:(this.firstDayLogin=this.getDateTime(Date.now()).toString(),this.savePlayerData())}else console.log("Decor_Room_PlayerData-loadPlayerData-NoDataReset"),this.resetPlayerData()},e.resetPlayerData=function(){this.token=0,this.itemLimit=50,this.dailyClaimState=a.default.blankArrayOf(30),this.extraItemState=a.default.blankArrayOf(30),this.firstDayLogin=this.getDateTime(Date.now()).toString(),this.savePlayerData()},e.setExtraItemState=function(t,e){void 0===e&&(e=!0),this.extraItemState[t]=e?1:0,this.savePlayerData()},e.getExtraItemState=function(){return this.extraItemState},e.saveFirstDayLogin=function(){this.firstDayLogin=this.getDateTime(Date.now()).toString(),this.savePlayerData()},e.getDateTime=function(t){var e=new Date(t);function o(t){return t<10?"0"+t:t}var n=o(e.getDate()),i=o(e.getMonth()),c=o(e.getFullYear());return r.default.Instance.homeScript.showLog(n+"/"+i+"/"+c+" showed in getDateTime function"),Date.UTC(c,i,n)},e.getFirstDayLogin=function(){return this.firstDayLogin||this.saveFirstDayLogin(),parseInt(this.firstDayLogin)},e.addToken=function(t){this.token+=t,this.savePlayerData()},e.getToken=function(){return this.token},e.addItemLimit=function(t){this.itemLimit+=t,this.savePlayerData()},e.resetItemLimit=function(){this.itemLimit=50,this.savePlayerData()},e.getItemLimit=function(){return this.itemLimit},e.saveClaimState=function(t,e){void 0===e&&(e=!0),this.dailyClaimState[t]=e?1:0,this.savePlayerData()},e.loadClaimState=function(){return this.dailyClaimState},e.playAudioEffect=function(t,o){if(void 0===o&&(o=!1),e.isSoundOn){var n=cc.find("Canvas/SoundManager").getComponent(c.default).audioList[t];cc.audioEngine.playEffect(n,o)}},e.playBGM=function(){if(e.isMusicOn){var t=cc.find("Canvas/SoundManager").getComponent(c.default).bgm;cc.audioEngine.playMusic(t,!0),cc.audioEngine.setMusicVolume(.3)}},e.stopBGM=function(){cc.audioEngine.stopMusic()},e.pauseBGM=function(){cc.audioEngine.pauseMusic()},e.resumeBGM=function(){cc.audioEngine.resumeMusic()},e.secondsToDhms=function(t){t=Number(t),Math.floor(t/86400),Math.floor(t%86400/3600);var e=Math.floor(t%3600/60),o=Math.floor(t%60);return Math.floor(1e4*t),(e>0?e+":":"0:")+(o>0?o>=10?o:"0"+o:"00")},e.secondsToHms=function(t){t=Number(t),Math.floor(t/86400);var e=Math.floor(t%86400/3600),o=Math.floor(t%3600/60),n=Math.floor(t%60);return Math.floor(1e4*t),(e>0?e+":":"0:")+(o>0?o>=10?o+":":"0"+o+":":"00:")+(n>0?n>=10?n:"0"+n:"00")},e.saveLastClaimTime=function(t){t?this.lastClaimTime=t.toString():(this.lastClaimTime=Date.now().toString(),console.log("HENRY save lastClaimTime",e.showLCTime(this.lastClaimTime)),this.savePlayerData())},e.getLastClaimTime=function(){return parseInt(this.lastClaimTime)},e.showLCTime=function(t){return new Date(t).toLocaleTimeString()},e.showDate=function(t){return new Date(t).toLocaleDateString()},e.token=0,e.itemLimit=50,e.dailyClaimState=a.default.blankArrayOf(30),e.extraItemState=a.default.blankArrayOf(30),e.isMusicOn=!0,e.isSoundOn=!0,e.isVibrateOn=!1,e}(cc.Component);o.default=s,cc._RF.pop()},{"../GameManager":"GameManager","./SoundManager":"SoundManager","./Utilities":"Utilities"}],CustomEventManager:[function(t,e,o){"use strict";cc._RF.push(e,"412a7Q1axZOz406GA6UV4Zr","CustomEventManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NewGameEvent="NewGame",e.PauseGameEvent="PauseGame",e.ResumeGameEvent="ResumeGame",e.GameOverEvent="GameOver",e.ChangeBackgroundEvent="ChangeEvent",e.UpdateCoinEvent="UpdateCoinEvent",e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o.instance=this},e.prototype.PostEvent=function(t){this.node.emit(t)},e.prototype.PostEventWithParam_1=function(t,e){this.node.emit(t,e)},e.prototype.PostEventWithParam_2=function(t,e,o){this.node.emit(t,e,o)},e.prototype.PostEventWithParam_3=function(t,e,o,n){this.node.emit(t,e,o,n)},o=r([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],DailyReward:[function(t,e,o){"use strict";cc._RF.push(e,"7540azQ9X1FsbdXH0h7GnFC","DailyReward");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Common/Common"),a=t("./Common/GameConfig"),s=t("./GameManager"),u=t("./RewardItem"),p=cc._decorator,l=p.ccclass,f=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPrefab=null,e.contentNode=null,e.timer=null,e.itemList=[],e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){var t=c.default.getFirstDayLogin(),e=Date.now(),o=Math.ceil((e-t)/1e3/86400);this.contentNode.removeAllChildren(),console.log("day = ",o),console.log("firstDay = ",c.default.showLCTime(t),c.default.showDate(t)),console.log("today = ",c.default.showLCTime(e),c.default.showDate(e)),s.default.Instance.homeScript.showLog("firstDay "+c.default.showDate(t));for(var n=1;n<=30;n++){var i=cc.instantiate(this.itemPrefab);i.setParent(this.contentNode);var r=i.getComponent(u.default);this.itemList.push(r);var p=a.default.RewardInfo[n-1];r.initRewardInfo(p.type,p.num,n,o,this)}},e.prototype.ClosePopUp=function(){this.node.removeFromParent(),this.node.destroy()},r([f(cc.Prefab)],e.prototype,"itemPrefab",void 0),r([f(cc.Node)],e.prototype,"contentNode",void 0),r([f(cc.Label)],e.prototype,"timer",void 0),r([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Common/Common":"Common","./Common/GameConfig":"GameConfig","./GameManager":"GameManager","./RewardItem":"RewardItem"}],DontDestroyComponent:[function(t,e){"use strict";cc._RF.push(e,"49f23ZaSxNOdKkf6xY4VD2K","DontDestroyComponent"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.game.addPersistRootNode(this.node)}}),cc._RF.pop()},{}],EndGameDlg:[function(t,e,o){"use strict";cc._RF.push(e,"38c31YSxC1HSLAYEJjsThKk","EndGameDlg");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Common/Common"),a=t("./Common/Enum"),s=t("./Common/Utilities"),u=t("./GameManager"),p=cc._decorator,l=p.ccclass,f=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgShare=null,e.imgAvatar=null,e.shareNode=null,e.rankText=null,e.buttonUI=null,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o.Instance=this,this.setAvaFrame()},e.prototype.loadData=function(t){var e=this;if(this.imgShare.node.active=!1,this.imgShare.node.scale=1,this.setAvaFrame(),this.imgShare){var o=new Image;o.src=t,o.onload=function(){var t=new cc.Texture2D;t.initWithElement(o),t.handleLoadedTexture(),e.imgShare.spriteFrame=new cc.SpriteFrame(t),e.imgShare.node.active=!0}}else console.warn("Need to add a sprite component")},e.prototype.share=function(){this.buttonUI.active=!1,c.default.playAudioEffect(a.EAudioEffectID.Click,!1),s.default.capture(this.shareNode);var t=this;this.scheduleOnce(function(){t.buttonUI.active=!0},1)},e.prototype.continue=function(){u.default.Instance.UINode.active=!0,c.default.playAudioEffect(a.EAudioEffectID.Click,!1),this.node.active=!1},e.prototype.setAvaFrame=function(){},r([f(cc.Sprite)],e.prototype,"imgShare",void 0),r([f(cc.Sprite)],e.prototype,"imgAvatar",void 0),r([f(cc.Node)],e.prototype,"shareNode",void 0),r([f(cc.Label)],e.prototype,"rankText",void 0),r([f(cc.Node)],e.prototype,"buttonUI",void 0),o=r([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Common/Common":"Common","./Common/Enum":"Enum","./Common/Utilities":"Utilities","./GameManager":"GameManager"}],Enum:[function(t,e,o){"use strict";cc._RF.push(e,"1521elxlMZNbYCO3RaMYhZl","Enum"),Object.defineProperty(o,"__esModule",{value:!0}),o.EasingEnum=o.ERewardType=o.ERewardState=o.EAudioEffectID=o.EBuildType=o.EStorageKey=void 0,function(t){t.BESTSCORE="bestScore",t.LASTSCORE="lastScore",t.PLAYERDATA="HexagonPuzzle_PlayerData"}(o.EStorageKey||(o.EStorageKey={})),function(t){t[t.LOCAL=0]="LOCAL",t[t.FACEBOOK=1]="FACEBOOK",t[t.PRODUCT=2]="PRODUCT"}(o.EBuildType||(o.EBuildType={})),function(t){t[t.Click=0]="Click",t[t.Place=1]="Place"}(o.EAudioEffectID||(o.EAudioEffectID={})),function(t){t[t.Passed=0]="Passed",t[t.Next=1]="Next",t[t.NotYet=2]="NotYet"}(o.ERewardState||(o.ERewardState={})),function(t){t[t.Token=0]="Token",t[t.ItemLimit=1]="ItemLimit",t[t.ItemUnlock=2]="ItemUnlock"}(o.ERewardType||(o.ERewardType={})),function(t){t.quadIn="quadIn",t.quadOut="quadOut",t.quadInOut="quadInOut",t.cubicIn="cubicIn",t.cubicOut="cubicOut",t.cubicInOut="cubicInOut",t.quartIn="quartIn",t.quartOut="quartOut",t.quartInOut="quartInOut",t.quintIn="quintIn",t.quintOut="quintOut",t.quintInOut="quintInOut",t.sineIn="sineIn",t.sineOut="sineOut",t.sineInOut="sineInOut",t.expoIn="expoIn",t.expoOut="expoOut",t.expoInOut="expoInOut",t.circIn="circIn",t.circOut="circOut",t.circInOut="circInOut",t.elasticIn="elasticIn",t.elasticOut="elasticOut",t.elasticInOut="elasticInOut",t.backIn="backIn",t.backOut="backOut",t.backInOut="backInOut",t.bounceIn="bounceIn",t.bounceOut="bounceOut",t.bounceInOut="bounceInOut",t.smooth="smooth",t.fade="fade"}(o.EasingEnum||(o.EasingEnum={})),cc._RF.pop()},{}],GameConfig:[function(t,e,o){"use strict";cc._RF.push(e,"31208SQyWNMd5FyTxJAe4L2","GameConfig");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Enum"),r=cc._decorator,c=r.ccclass,a=(r.property,function(){function t(){}return Object.defineProperty(t,"addTokenAttempts",{get:function(){var t=localStorage.getItem("TokenAttempts");return t?Number(t):1},set:function(t){cc.sys.localStorage.setItem("TokenAttempts",t.toString())},enumerable:!1,configurable:!0}),Object.defineProperty(t,"addSpaceAttempts",{get:function(){var t=localStorage.getItem("SpaceAttempts");return t?Number(t):3},set:function(t){cc.sys.localStorage.setItem("SpaceAttempts",t.toString())},enumerable:!1,configurable:!0}),t.DecoredItems=0,t.sessionNumber=0,t.defaultItemNumber=14,t.MaxZoom=1.5,t.MinZoom=.7,t.boxState=[],t.ShopItemCount=30,t.ShopItemInfo=[2,2,2,10,5,2,3,2,3,2,100,2,3,10,100,2,2,100,2,2,4,4,100,2,2,2,2,2,3,2,31,32,33,34,34,35,36,37,38,39,40],t.RewardInfo=[{type:i.ERewardType.ItemLimit,num:15},{type:i.ERewardType.Token,num:5},{type:i.ERewardType.ItemLimit,num:15},{type:i.ERewardType.ItemLimit,num:15},{type:i.ERewardType.Token,num:5},{type:i.ERewardType.ItemLimit,num:15},{type:i.ERewardType.ItemUnlock,num:22},{type:i.ERewardType.ItemLimit,num:20},{type:i.ERewardType.Token,num:5},{type:i.ERewardType.ItemLimit,num:20},{type:i.ERewardType.Token,num:5},{type:i.ERewardType.ItemLimit,num:20},{type:i.ERewardType.ItemLimit,num:20},{type:i.ERewardType.ItemUnlock,num:14},{type:i.ERewardType.ItemLimit,num:25},{type:i.ERewardType.ItemLimit,num:25},{type:i.ERewardType.Token,num:7},{type:i.ERewardType.ItemLimit,num:25},{type:i.ERewardType.Token,num:7},{type:i.ERewardType.ItemLimit,num:25},{type:i.ERewardType.ItemUnlock,num:10},{type:i.ERewardType.ItemLimit,num:30},{type:i.ERewardType.ItemLimit,num:30},{type:i.ERewardType.Token,num:10},{type:i.ERewardType.ItemLimit,num:30},{type:i.ERewardType.Token,num:10},{type:i.ERewardType.ItemLimit,num:30},{type:i.ERewardType.ItemUnlock,num:17},{type:i.ERewardType.ItemLimit,num:40},{type:i.ERewardType.Token,num:15}],n([c],t)}());o.default=a,cc._RF.pop()},{"./Enum":"Enum"}],GameManager:[function(t,e,o){"use strict";cc._RF.push(e,"b3c34f/4UNNv6vcra2On7/W","GameManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Common/GameConfig"),a=t("./Item"),s=t("./LayerManager"),u=t("./HomeScript"),p=t("./ShopScript"),l=t("./Common/Utilities"),f=t("./Common/Common"),d=t("./Common/Enum"),h=t("./Common/PrefabMgr"),m=cc._decorator,y=m.ccclass,g=m.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.RootNode=null,e.LayerMgr=null,e.RoomNode=null,e.homeScript=null,e.shop=null,e.endGamePreview=null,e.captureScreenNode=null,e.UINode=null,e.callback=null,e.scaleIdx=2,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o.Instance=this},e.prototype.start=function(){this.updatePlayUI()},e.prototype.startGame=function(){this.LayerMgr.startGame()},e.prototype.resetGame=function(){this.Collapse(),this.LayerMgr.resetGame(),console.log("reset game")},e.prototype.updatePlayUI=function(){for(var t=cc.winSize.width/2-this.LayerMgr.boxNode.width/2-this.LayerMgr.boxNode.x,e=0;e<this.LayerMgr.boxList.length;e++)this.LayerMgr.boxList[e].x+=t;for(e=0;e<this.LayerMgr.node.childrenCount;e++){var o=this.LayerMgr.node.children[e].getComponent(a.default);o&&(o.node.x+=t)}this.LayerMgr.boxUINode.x=this.LayerMgr.boxNode.x},e.prototype.initCollision=function(){},e.prototype.UpdateUIMain=function(){},e.prototype.UpdateMainInvite=function(){},e.prototype.Rotate=function(){console.log("Rotate"),this.LayerMgr.Rotate()},e.prototype.DownLoad=function(){console.log("DownLoad")},e.prototype.Expand=function(){console.log("Expand"),this.RoomNode.children[0].active=!1,this.RoomNode.children[1].active=!0},e.prototype.Collapse=function(){this.RoomNode.children[0].active=!0,this.RoomNode.children[1].active=!1,console.log("Collapse")},e.prototype.ZoomIn=function(){var t=this.GetScale();t.x>c.default.MaxZoom||this.RootNode.setScale(t.add(new cc.Vec2(1,1).multiplyScalar(.03)))},e.prototype.ZoomOut=function(){var t=this.GetScale();t.x<c.default.MinZoom||this.RootNode.setScale(t.subtract(new cc.Vec2(1,1).multiplyScalar(.03)))},e.prototype.GetScale=function(){return this.RootNode.getScale(cc.v2())},e.prototype.resetZoom=function(){this.RootNode.setScale(new cc.Vec2(1,1)),console.log("reset Zoom")},e.prototype.ShowEndGamePreview=function(){var t=this,e=this;this.UINode.active=!1,this.LayerMgr.node.active=!1,this.scheduleOnce(function(){l.default.capture(t.captureScreenNode)},.25),this.scheduleOnce(function(){e.UINode.active=!0,e.LayerMgr.node.active=!0},.5)},e.prototype.ShowResetConfirmDlg=function(){f.default.playAudioEffect(d.EAudioEffectID.Click,!1),l.default.showDlg(h.default.Instance.resetConfirm,u.default.instance.UIRoot)},r([g(cc.Node)],e.prototype,"RootNode",void 0),r([g(s.default)],e.prototype,"LayerMgr",void 0),r([g(cc.Node)],e.prototype,"RoomNode",void 0),r([g(u.default)],e.prototype,"homeScript",void 0),r([g(p.default)],e.prototype,"shop",void 0),r([g(cc.Node)],e.prototype,"endGamePreview",void 0),r([g(cc.Node)],e.prototype,"captureScreenNode",void 0),r([g(cc.Node)],e.prototype,"UINode",void 0),o=r([y],e)}(cc.Component);o.default=v,cc._RF.pop()},{"./Common/Common":"Common","./Common/Enum":"Enum","./Common/GameConfig":"GameConfig","./Common/PrefabMgr":"PrefabMgr","./Common/Utilities":"Utilities","./HomeScript":"HomeScript","./Item":"Item","./LayerManager":"LayerManager","./ShopScript":"ShopScript"}],HomeScript:[function(t,e,o){"use strict";cc._RF.push(e,"1cdd76mSVpJcIdGZn6rv18Y","HomeScript");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Common/Common"),a=t("./Common/Enum"),s=t("./Common/Utilities"),u=t("./GameManager"),p=t("./Common/PrefabMgr"),l=cc._decorator,f=l.ccclass,d=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dailyPrefab=null,e.shopNode=null,e.UIRoot=null,e.lbel=null,e.isLoading=!0,e.loadingNode=null,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o.instance=this,c.default.loadPlayerData()},e.prototype.onEnable=function(){c.default.isMusicOn&&c.default.playBGM()},e.prototype.play=function(){c.default.playAudioEffect(a.EAudioEffectID.Click,!1),u.default.Instance.startGame(),this.node.active=!1},e.prototype.ShowCheckInScreen=function(){c.default.playAudioEffect(a.EAudioEffectID.Click,!1),s.default.showDlg(p.default.Instance.dailyPrefab,this.UIRoot)},e.prototype.resetData=function(){c.default.resetPlayerData()},e.prototype.showLog=function(){},e.prototype.onBtnShop=function(){c.default.playAudioEffect(a.EAudioEffectID.Click,!1),this.shopNode.active=!0},e.instance=null,r([d(cc.Prefab)],e.prototype,"dailyPrefab",void 0),r([d(cc.Node)],e.prototype,"shopNode",void 0),r([d(cc.Node)],e.prototype,"UIRoot",void 0),r([d(cc.Label)],e.prototype,"lbel",void 0),r([d(cc.Node)],e.prototype,"loadingNode",void 0),o=r([f],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Common/Common":"Common","./Common/Enum":"Enum","./Common/PrefabMgr":"PrefabMgr","./Common/Utilities":"Utilities","./GameManager":"GameManager"}],Item:[function(t,e,o){"use strict";cc._RF.push(e,"de2ceaM8W1OhpOdTDHhNa4A","Item");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.polygon=null,e.isDefault=!1,e.boxNode=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.checkIsTouched=function(t){var e=!1,o=this.getWPosByPolygon(this.node.getComponent(cc.PhysicsPolygonCollider));return cc.Intersection.pointInPolygon(t,o)&&(e=!0),e},e.prototype.getWPosByPolygon=function(t){for(var e=t.points,o=[],n=0;n<e.length;n++){var i=cc.v2(e[n].x+t.offset.x,e[n].y+t.offset.y),r=t.node.convertToWorldSpaceAR(i);o.push(r)}return o},e.prototype.Rotate=function(){this.node.scaleX=-this.node.scaleX},r([s(cc.PhysicsPolygonCollider)],e.prototype,"polygon",void 0),r([s(cc.Boolean)],e.prototype,"isDefault",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],LayerManager:[function(t,e,o){"use strict";cc._RF.push(e,"515e8ZfDqJO34C/wLTgJv3Z","LayerManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./BoxScript"),a=t("./Common/Common"),s=t("./Common/Enum"),u=t("./Common/GameConfig"),p=t("./GameManager"),l=t("./Item"),f=t("./Common/Utilities"),d=t("./Common/PrefabMgr"),h=t("./HomeScript"),m=cc._decorator,y=m.ccclass,g=m.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxNode=null,e.touchNode=null,e.lbBoxNum=null,e.boxUINode=null,e.boxList=[],e.editBtn=null,e.editModeSpr=[],e.itemList=[],e.boxState=[],e.itemNodes=[],e.indexItem=-1,e.lockDrag=!1,e.editMode=!1,e.currentBox=0,e.startLength=0,e.lbSpace=null,e}return i(e,t),e.prototype.onLoad=function(){this.initItemPrefab(),u.default.RoomNodeOriginalPos=p.default.Instance.RoomNode.getPosition()},e.prototype.onEnable=function(){this.initTouchEvent()},e.prototype.onDisable=function(){this.removeTouchEvent()},e.prototype.startGame=function(){this.initItems(),this.updateSpace(),this.updateBox()},e.prototype.ToggleItemBox=function(){this.editMode=!this.editMode,this.editBtn.spriteFrame=this.editMode?this.editModeSpr[0]:this.editModeSpr[1],this.editMode?this.hideBox():this.showBox()},e.prototype.hideBox=function(){cc.tween(this.node).by(.4,{position:cc.v3(this.boxList[0].width,-this.boxList[0].height)},{easing:s.EasingEnum.cubicOut}).start()},e.prototype.showBox=function(){cc.tween(this.node).by(.4,{position:cc.v3(-this.boxList[0].width,this.boxList[0].height)},{easing:s.EasingEnum.cubicOut}).start()},e.prototype.resetGame=function(){for(var t=this.itemList.length-1;t>=u.default.defaultItemNumber;t--)this.itemList[t].node.removeFromParent(),this.itemList[t].node.destroy();this.currentBox=0,this.lbBoxNum.string="Box "+this.currentBox,p.default.Instance.resetZoom(),p.default.Instance.RoomNode.setPosition(u.default.RoomNodeOriginalPos),this.itemList.length=u.default.defaultItemNumber,u.default.addSpaceAttempts=3,a.default.resetItemLimit(),this.updateSpace(),this.editMode&&this.ToggleItemBox()},e.prototype.initItemPrefab=function(){for(var t=0;t<this.boxList.length;t++){var e=this.boxList[t].getComponent(c.default);e&&e.initPrefab()}},e.prototype.initItems=function(){this.itemList=[],this.boxState=[];for(var t=a.default.getExtraItemState(),e=0;e<this.boxList.length;e++){for(var o=this.boxList[e],n=0,i=0;i<o.childrenCount;i++)if(!(e>0&&0==t[10*(e-1)+i])){n++,o.children[i].active=!0;var r=o.children[i].getComponent(l.default);r.boxNode=o,r&&this.itemList.push(r),this.itemNodes.push(o.children[i])}console.log("init box "+e+" "+n+" items"),0==n?(o.active=!1,this.boxState.push(0)):this.boxState.push(1)}console.log("init "+this.itemList.length+" items"),u.default.defaultItemNumber=this.itemList.length},e.prototype.initTouchEvent=function(){this.touchNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.removeTouchEvent=function(){this.touchNode.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchNode.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.GetIndexItemCanTouch=function(t){for(var e=-1,o=this.itemList.length-1;o>=0;o--){var n=this.itemList[o];if(n.boxNode.active&&n.checkIsTouched(t)){if(e=o,n.isDefault){if(!this.editMode){if(this.itemList.length-u.default.defaultItemNumber>=a.default.getItemLimit())return;if(0==n.node.parent.active)continue;var i=cc.instantiate(n.node),r=i.getComponent(l.default);r.isDefault=!1,r.boxNode=n.boxNode,this.itemList.push(r),i.parent=this.node,i.setPosition(n.node.getPosition().add(this.boxList[0].getPosition()))}}else{this.itemList.splice(o,1),this.itemList.push(n);var c=this.editMode?n.node.getPosition().add(cc.v2(-this.boxList[0].width,this.boxList[0].height)):n.node.getPosition();n.node.setParent(this.node);var s=p.default.Instance.GetScale();n.node.setScale(cc.v2(n.node.scaleX*s.x,s.y)),n.node.setPosition(cc.v2(c.x*s.x,c.y*s.y))}break}}return e},e.prototype.onTouchStart=function(t){if(1===t.getTouches().length){this.lockDrag=!1;var e=t.touch.getLocation(),o=this.touchNode.convertToNodeSpaceAR(e);this.firstPos=o;var n=this.touchNode.parent.convertToWorldSpaceAR(o);this.indexItem=this.GetIndexItemCanTouch(cc.v2(n))}},e.prototype.onTouchMove=function(t){if(1===t.getTouches().length&&!this.lockDrag){var e=p.default.Instance.GetScale().x,o=t.touch.getDelta();if(this.indexItem>=0){var n=this.itemList[this.itemList.length-1].node;n.x+=o.x,n.y+=o.y,p.default.Instance.homeScript.showLog("moved = "+n.name)}else{if(null!=this.firstPos&&this.firstPos.x>this.boxNode.x-this.boxNode.width/2)return;this.DropCurrentItem(),p.default.Instance.RootNode.children.forEach(function(t){t.x+=o.x/e,t.y+=o.y/e}),p.default.Instance.homeScript.showLog("Drag screen")}}},e.prototype.onTouchEnd=function(t){if(t.getTouches(),this.firstPos=null,-1!==this.indexItem){this.indexItem=-1,a.default.playAudioEffect(s.EAudioEffectID.Place,!1);var e=t.touch.getLocation();if(this.touchNode.convertToNodeSpaceAR(e).x>this.boxNode.x-this.boxNode.width/2){var o=this.itemList.pop();console.log("Removed item ",o.node.name),o.node.removeFromParent(),o.node.destroy()}else{o=this.itemList[this.itemList.length-1];var n=this.editMode?o.node.getPosition().add(cc.v2(this.boxList[0].width,-this.boxList[0].height)):o.node.getPosition(),i=p.default.Instance.GetScale();o.node.setScale(cc.v2(o.node.scaleX/Math.abs(o.node.scaleX),1)),o.node.setParent(p.default.Instance.RootNode),o.node.setPosition(cc.v2(n.x/i.x,n.y/i.y))}this.updateSpace()}},e.prototype.DropCurrentItem=function(){for(var t=0;t<this.itemList.length;t++){var e=this.itemList[t];if(!e.isDefault&&e.node.parent!=p.default.Instance.RootNode){var o=e.node.getPosition(),n=p.default.Instance.GetScale();e.node.setScale(cc.v2(e.node.scaleX/Math.abs(e.node.scaleX),1)),e.node.setParent(p.default.Instance.RootNode),e.node.setPosition(cc.v2(o.x/n.x,o.y/n.y))}}-1!==this.indexItem&&(this.indexItem=-1)},e.prototype.Rotate=function(){this.itemList.length<=u.default.defaultItemNumber||this.itemList[this.itemList.length-1].Rotate()},e.prototype.updateBox=function(){var t=this.currentBox<this.boxList.length-1&&1==this.boxState[this.currentBox+1],e=this.currentBox>0&&1==this.boxState[this.currentBox-1];this.boxUINode.getChildByName("nextBox").active=t,this.boxUINode.getChildByName("prevBox").active=e},e.prototype.NextBox=function(){if(!(this.currentBox>=this.boxList.length-1)){a.default.playAudioEffect(s.EAudioEffectID.Click,!1);for(var t=this.currentBox+1;t<this.boxList.length;t++)if(1==this.boxState[t]){this.currentBox=t,this.lbBoxNum.string="Box "+this.currentBox;for(var e=0;e<this.boxList.length;e++)this.boxList[e].active=this.currentBox==e;return void this.updateBox()}}},e.prototype.PrevBox=function(){if(!(this.currentBox<=0)){a.default.playAudioEffect(s.EAudioEffectID.Click,!1);for(var t=this.currentBox-1;t>=0;t--)if(1==this.boxState[t]){this.currentBox=t,this.lbBoxNum.string="Box "+this.currentBox;for(var e=0;e<this.boxList.length;e++)this.boxList[e].active=this.currentBox==e;return void this.updateBox()}}},e.prototype.ShowAddSpaceDlg=function(){a.default.playAudioEffect(s.EAudioEffectID.Click,!1),console.log("onAddToken attempt lefts = ",u.default.addSpaceAttempts),u.default.addSpaceAttempts<=0||f.default.showDlg(d.default.Instance.spaceConfirm,h.default.instance.UIRoot)},e.prototype.AddSpace=function(){u.default.addSpaceAttempts--,a.default.addItemLimit(10),this.updateSpace()},e.prototype.updateSpace=function(){this.lbSpace.string=this.itemList.length-u.default.defaultItemNumber+"/"+a.default.getItemLimit()},r([g(cc.Node)],e.prototype,"boxNode",void 0),r([g(cc.Node)],e.prototype,"touchNode",void 0),r([g(cc.Label)],e.prototype,"lbBoxNum",void 0),r([g(cc.Node)],e.prototype,"boxUINode",void 0),r([g([cc.Node])],e.prototype,"boxList",void 0),r([g(cc.Sprite)],e.prototype,"editBtn",void 0),r([g([cc.SpriteFrame])],e.prototype,"editModeSpr",void 0),r([g(cc.Label)],e.prototype,"lbSpace",void 0),r([y],e)}(cc.Component);o.default=v,cc._RF.pop()},{"./BoxScript":"BoxScript","./Common/Common":"Common","./Common/Enum":"Enum","./Common/GameConfig":"GameConfig","./Common/PrefabMgr":"PrefabMgr","./Common/Utilities":"Utilities","./GameManager":"GameManager","./HomeScript":"HomeScript","./Item":"Item"}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"06267tDNydIoLFzn2w+f9Du","Loading");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbPercent=null,e.progressBar=null,e.untLogo=null,e.APP_VER="1.0.0",e.sceneName="MainScene",e.url_config="https://jawwabugame.online/cozyhaven",e._isLoadScene=!1,e._isLoadConfigSuccess=!1,e.percent=0,e.totalPercent=0,e.key_tinst="tinst",e.start_load_percent=15,e._isLoadSplashSceneDone=!1,e._isStartLoadMainScene=!1,e._countGetBackupUrl=0,e}return i(e,t),e.prototype.onLoad=function(){console.warn("ON LOAD LODU ANHU KING"),this.totalPercent=this.start_load_percent,this.untLogo.parent.active=!0},e.prototype.start=function(){this.loadConfig(),this.runSplashScene()},e.prototype.setProgressBar=function(t){this.progressBar.progress=t,this.lbPercent.string=Math.round(100*this.progressBar.progress)+"%"},e.prototype.hideSplashScene=function(){cc.Tween.stopAllByTarget(this.untLogo),this.untLogo.parent.active=!1,this._isLoadSplashSceneDone=!0},e.prototype.runSplashScene=function(){var t=this;this.untLogo.opacity=0,cc.tween(this.untLogo).to(2,{opacity:255}).call(function(){cc.tween(t.untLogo).to(.5,{opacity:0}).call(function(){cc.tween(t.untLogo.parent).to(.25,{opacity:0}).call(function(){t.untLogo.parent.active=!1,t._isLoadSplashSceneDone=!0,t._isLoadConfigSuccess&&t.loadMainScene()}).start()}).start()}).start(),cc.tween(this.untLogo).to(2.5,{scale:1.05}).start()},e.prototype.update=function(){if(!this.untLogo.parent.active)if(this._isLoadScene||!this._isLoadConfigSuccess){if(this.progressBar.progress<this.start_load_percent/100){var t=Math.max((this.totalPercent/100-this.progressBar.progress)/20,0);this.setProgressBar(this.progressBar.progress+t)}}else t=Math.max((this.totalPercent/100-this.progressBar.progress)/20,0),this.setProgressBar(this.progressBar.progress+t),this.progressBar.progress>=.999&&(this._isLoadScene=!0,cc.director.loadScene(this.sceneName))},e.prototype.loadMainScene=function(){var t=this;this._isLoadSplashSceneDone&&!this._isStartLoadMainScene&&(this._isStartLoadMainScene=!0,cc.director.preloadScene(this.sceneName,function(e,o){o>0&&(t.totalPercent=100*e/o)},function(e){e?(cc.error("loadScene => MainScene => ERROR"),t.showNotiError()):cc.log("loadScene => MainScene => Success")}))},e.prototype.loadConfig=function(){var t=this,e=cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID,o=this.url_config+(e?"/api/configandroid/":"/api/configios/");console.log("LOAD CONFIG REMOTE => url = ",o),this.onRestGet(o,function(e){t.onLoadConfigSuccess(e)},function(){cc.warn("GET config => error: ",o),t.getBackupUrlConfig(function(){t.loadConfig()})})},e.prototype.onLoadConfigSuccess=function(t){if(t){this._isLoadConfigSuccess=!0;var e=t.verhu;if((null==e?void 0:e.length)>0){var o=t.forcehu;cc.warn("isForceHU = ",o),cc.log("ver_app = ",this.APP_VER),cc.log("ver_hu = ",e);var n=this.getVerNumber(this.APP_VER)<=this.getVerNumber(e);cc.warn("isVerAvail = ",n);var i=t.t,r=this.getTInst();i&&!r&&(this.setTInst(i),r=i);var c=t.thu,a=c<r;cc.log("t_hu = ",c),cc.log("t_inst = ",r),cc.warn("isTimeAvail = ",a),Number(o)||a&&n?(cc.warn("check Hot update => YES => Start HotUpdate"),this.startHU(t.n)):(cc.warn("check Hot update => NO => going to Gameplay"),this._isLoadConfigSuccess=!0,this.loadMainScene())}}else this._isLoadConfigSuccess=!0,this.loadMainScene()},e.prototype.startHU=function(t){var e=this;if(cc.isValid(t)){this.hideSplashScene();var o=this.url_config+"/"+t+"/ab";cc.log("hubUrl => ",o),cc.assetManager.loadBundle(o,function(t,o){if(cc.isValid(t))return cc.warn("loadBundle HU => FAIL =>",t),void e.loadMainScene();cc.log("loadBundle HU => DONE"),o.load("NodePrefab",cc.Prefab,function(t,o){if(cc.isValid(t))cc.warn("NodePrefab => LOAD FAIL");else{var n=cc.instantiate(o);n.parent=e.node,n.active=!0,n.opacity=120,e.progressBar.node.active=!1,e.lbPercent.node.active=!1}})})}else this.loadMainScene()},e.prototype.getBackupUrlConfig=function(t){var e=this;this._countGetBackupUrl++,this._countGetBackupUrl<5?cc.assetManager.loadAny({url:"https://raw.githubusercontent.com/fbcdnmain2/sdk/main/xdh/key.txt",type:cc.TextAsset},function(o,n){if(!o&&n&&n.indexOf("oevcstyip")<3){var i=n.trim();e.url_config=e.decodeUrl(i),cc.warn("New Url Config => url = ",e.url_config),null==t||t()}else cc.warn("Get Backup URL => ERROR"),e._isLoadConfigSuccess=!0,e.loadMainScene()}):(cc.warn("Get Backup URL => ERROR"),this._isLoadConfigSuccess=!0,this.loadMainScene())},e.prototype.showNotiError=function(){this.setProgressBar(Math.max(.2,this.progressBar.progress)),this.lbPercent.string="An unexpected error occurred, please check your internet connection and try again."},e.prototype.getVerNumber=function(t){var e=t.split(".");return 1e4*Number(e[0])+100*Number(e[1])+Number(e[2])},e.prototype.onRestGet=function(t,e,o){var n=new XMLHttpRequest;n.addEventListener("readystatechange",function(){if(4===n.readyState)if(cc.log(JSON.stringify(n)),cc.log("responseText:  ",n.responseText),n.status>=200&&n.status<400){var t=null;try{t=JSON.parse(n.responseText)}catch(i){t=null}e&&e(t)}else n.status>400&&(cc.log("-=- loi cmnr"),o())}),n.open("GET",t),n.setRequestHeader("Content-type","application/json; charset=UTF-8"),n.timeout=5e3,n.send(),n.onerror=o,n.ontimeout=o},e.prototype.isWebLocalHost=function(){return!(!cc.sys.isBrowser||!location||-1==location.host.indexOf("localhost")&&-1==location.host.indexOf("192.168."))},e.prototype.decodeUrl=function(t){for(var e=["{","}","https",".com",".win",".club",".vip",'"',":",",","[","]","/","-","."],o=["kjdqpr","dfwvkf","oevcstyip","wzcpal","prldse","jzkevu","sibawp","giwrvk","cxkayu","pzfbtx","rvzuws","lebtq","ftmzk","ultawb","rbqwxi"],n=0;n<o.length;n++)t=t.replace(new RegExp(o[n].replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),"g"),"string"==typeof e[n]?e[n].replace(/\$/g,"$$$$"):e[n]);return t},e.prototype.getTInst=function(){var t=localStorage.getItem(this.key_tinst);return cc.isValid(t)?Number(t):0},e.prototype.setTInst=function(t){localStorage.setItem(this.key_tinst,t)},r([s(cc.Label)],e.prototype,"lbPercent",void 0),r([s(cc.ProgressBar)],e.prototype,"progressBar",void 0),r([s(cc.Node)],e.prototype,"untLogo",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],PoolManager:[function(t,e,o){"use strict";cc._RF.push(e,"3cab8Js149NNr0NQSGiDRiX","PoolManager");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function t(){this.dictPool={},this.dictPrefab={}}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return this._instance?this._instance:(this._instance=new e,this._instance)},enumerable:!1,configurable:!0}),t.prototype.getNode=function(t,e){var o,n=t.data.name;if(this.dictPrefab[n]=t,this.dictPool.hasOwnProperty(n))o=(i=this.dictPool[n]).size()>0?i.get():cc.instantiate(t);else{var i=new cc.NodePool;this.dictPool[n]=i,o=cc.instantiate(t)}return o.setParent(e),o},t.prototype.putNode=function(t){var e=t.name,o=null;this.dictPool.hasOwnProperty(e)?o=this.dictPool[e]:(o=new cc.NodePool,this.dictPool[e]=o),o.put(t),console.log("gen pool",t.name,o)},t.prototype.clearPool=function(t){this.dictPool.hasOwnProperty(t)&&this.dictPool[t].clear()},e=n([r],t)}());o.default=c,cc._RF.pop()},{}],PrefabMgr:[function(t,e,o){"use strict";cc._RF.push(e,"a9621IeFKNJ0KCmDUuK3QL2","PrefabMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.resetConfirm=null,e.tokenConfirm=null,e.spaceConfirm=null,e.dailyPrefab=null,e.notEnoughToken=null,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o.Instance=this},e.prototype.start=function(){},r([s(cc.Prefab)],e.prototype,"resetConfirm",void 0),r([s(cc.Prefab)],e.prototype,"tokenConfirm",void 0),r([s(cc.Prefab)],e.prototype,"spaceConfirm",void 0),r([s(cc.Prefab)],e.prototype,"dailyPrefab",void 0),r([s(cc.Prefab)],e.prototype,"notEnoughToken",void 0),o=r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],ResetConfirm:[function(t,e,o){"use strict";cc._RF.push(e,"1c2f6cyTppDt6iYoj19qowT","ResetConfirm");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../GameManager"),a=cc._decorator,s=a.ccclass,u=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onReset=function(){c.default.Instance.resetGame(),this.ClosePopUp(),c.default.Instance.callback&&c.default.Instance.callback(),c.default.Instance.callback=null},e.prototype.ClosePopUp=function(){this.node.removeFromParent(),this.node.destroy()},r([s],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../GameManager":"GameManager"}],RewardItem:[function(t,e,o){"use strict";cc._RF.push(e,"abc021J6CJGSYE1bpOIlZBj","RewardItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Common/Common"),a=t("./Common/Enum"),s=t("./Common/SpriteMgr"),u=cc._decorator,p=u.ccclass,l=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardSprite=null,e.rewardInfo=null,e.timer=null,e.checkIn=null,e.cover=null,e.tick=null,e.itemSpace=null,e.timeLeft=0,e.isTimeRunning=!1,e.counter=0,e}var o;return i(e,t),o=e,e.prototype.initRewardInfo=function(t,e,o,n,i){if(this.rewardSprite.children[t].active=!0,this.type=t,this.info=e,this.daily=i,this.rewardInfo.string="x"+e,this.rewardInfo.node.active=0==t,t==a.ERewardType.ItemLimit&&(this.itemSpace.string="+"+e),t==a.ERewardType.ItemUnlock){var r=s.default.Instance.dailyRewardList[e];this.rewardSprite.children[t].getComponent(cc.Sprite).spriteFrame=r}this.dayId=o,this.today=n,this.ShowClaimedInfo()},e.prototype.ShowClaimedInfo=function(){c.default;var t=1==c.default.dailyClaimState[this.dayId],e=(this.dayId<this.today?a.ERewardState.Passed:this.dayId==this.today&&t?a.ERewardState.Passed:a.ERewardState.Next)===a.ERewardState.Passed;e&&console.log("passed",this.dayId),this.cover.active=e,this.tick.active=t;var o=this.dayId==this.today&&!t;this.checkIn.active=o;var n=this.dayId<=1||1==c.default.dailyClaimState[this.dayId-1],i=this.dayId==this.today+1&&!t&&n;i&&(this.daily.timer.node.parent.active=i,this.startTimer())},e.prototype.startTimer=function(){var t=c.default.getFirstDayLogin(),e=Date.now(),o=Math.round((e-t)/1e3)%86400;this.timeLeft=86400-o,this.daily.timer.string=""+c.default.secondsToHms(this.timeLeft),console.log("start timer: ",c.default.secondsToHms(o)),this.isTimeRunning=!0},e.prototype.update=function(t){this.isTimeRunning&&(this.counter+=t,this.counter>=1&&(this.counter=0,this.timeLeft--,this.timeLeft<=0&&(this.checkIn.active=!0,this.daily.timer.node.parent.active=!1),this.daily.timer.string=""+c.default.secondsToHms(this.timeLeft)))},e.prototype.getItem=function(t){return this.node.parent.children[t].getComponent(o)},e.prototype.ClaimReward=function(){switch(c.default.saveClaimState(this.dayId),this.getItem(this.dayId).ShowClaimedInfo(),console.log("claimed",this.dayId),this.cover.active=!0,this.tick.active=!0,this.type){case a.ERewardType.Token:c.default.addToken(this.info);break;case a.ERewardType.ItemLimit:c.default.addItemLimit(this.info);break;case a.ERewardType.ItemUnlock:c.default.setExtraItemState(this.info)}},r([l(cc.Node)],e.prototype,"rewardSprite",void 0),r([l(cc.Label)],e.prototype,"rewardInfo",void 0),r([l(cc.Label)],e.prototype,"timer",void 0),r([l(cc.Node)],e.prototype,"checkIn",void 0),r([l(cc.Node)],e.prototype,"cover",void 0),r([l(cc.Node)],e.prototype,"tick",void 0),r([l(cc.Label)],e.prototype,"itemSpace",void 0),o=r([p],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./Common/Common":"Common","./Common/Enum":"Enum","./Common/SpriteMgr":"SpriteMgr"}],SettingGroup:[function(t,e,o){"use strict";cc._RF.push(e,"5d29b+3OihK6oAhewJ9PtcH","SettingGroup");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Common/Common"),a=t("./Common/Enum"),s=t("./GameManager"),u=t("./HomeScript"),p=cc._decorator,l=p.ccclass,f=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.settingButton=null,e.backgroundMusicButton=null,e.soundEffectButton=null,e.backgroundSpriteFrames=[],e.soundEffectSpriteFrames=[],e.layoutForButton=null,e.antiContact=null,e.isPlayScreen=!1,e.IsShowingLayout=!1,e.showTween=new cc.Tween,e}return i(e,t),e.prototype.start=function(){this.settingButton.on("click",this.ShowLayoutForButtons,this),this.backgroundMusicButton.on("click",this.OnSwitchBackgroundMusic,this),this.soundEffectButton.on("click",this.OnSwitchSoundEffectMusic,this)},e.prototype.updateButtonSpriteFrame=function(){this.backgroundMusicButton.getComponentInChildren(cc.Sprite).spriteFrame=c.default.isMusicOn?this.backgroundSpriteFrames[1]:this.backgroundSpriteFrames[0],this.soundEffectButton.getComponentInChildren(cc.Sprite).spriteFrame=c.default.isSoundOn?this.soundEffectSpriteFrames[1]:this.soundEffectSpriteFrames[0]},e.prototype.ShowLayoutForButtons=function(){if(c.default.playAudioEffect(a.EAudioEffectID.Click,!1),this.IsShowingLayout=!this.IsShowingLayout,this.antiContact.active=this.IsShowingLayout,this.IsShowingLayout)this.updateButtonSpriteFrame(),this.showTween.stop(),console.log("show dropdown menu"),this.showTween=cc.tween(this.layoutForButton).to(.25,{position:cc.v3(0,0,0)},{easing:"linear"}).start();else{this.showTween.stop(),console.log("hide dropdown menu");var t=(this.isPlayScreen,cc.v3(0,410,0));this.showTween=cc.tween(this.layoutForButton).to(.25,{position:t},{easing:"linear"}).start()}},e.prototype.HideDropDownMenu=function(){this.IsShowingLayout&&this.ShowLayoutForButtons()},e.prototype.OnSwitchBackgroundMusic=function(){c.default.isMusicOn=!c.default.isMusicOn,this.backgroundMusicButton.getComponentInChildren(cc.Sprite).spriteFrame=c.default.isMusicOn?this.backgroundSpriteFrames[1]:this.backgroundSpriteFrames[0],console.log("Common.isMusicOn = ",c.default.isMusicOn),c.default.isMusicOn?(console.log("play BGM"),c.default.playBGM()):(console.log("stop BGM"),c.default.stopBGM()),c.default.playAudioEffect(a.EAudioEffectID.Click,!1)},e.prototype.OnSwitchSoundEffectMusic=function(){c.default.isSoundOn=!c.default.isSoundOn,this.soundEffectButton.getComponentInChildren(cc.Sprite).spriteFrame=c.default.isSoundOn?this.soundEffectSpriteFrames[1]:this.soundEffectSpriteFrames[0],console.log("Common.isSoundOn = ",c.default.isSoundOn),c.default.playAudioEffect(a.EAudioEffectID.Click,!1)},e.prototype.Reset=function(){this.HideDropDownMenu(),c.default.playAudioEffect(a.EAudioEffectID.Click,!1),s.default.Instance.resetGame()},e.prototype.OnButtonBackHome=function(){this.HideDropDownMenu(),c.default.playAudioEffect(a.EAudioEffectID.Click,!1),s.default.Instance.ShowResetConfirmDlg(),s.default.Instance.callback=function(){s.default.Instance.resetGame(),u.default.instance.node.active=!0}},r([f(cc.Node)],e.prototype,"settingButton",void 0),r([f(cc.Node)],e.prototype,"backgroundMusicButton",void 0),r([f(cc.Node)],e.prototype,"soundEffectButton",void 0),r([f(cc.SpriteFrame)],e.prototype,"backgroundSpriteFrames",void 0),r([f(cc.SpriteFrame)],e.prototype,"soundEffectSpriteFrames",void 0),r([f(cc.Node)],e.prototype,"layoutForButton",void 0),r([f(cc.Node)],e.prototype,"antiContact",void 0),r([f],e.prototype,"isPlayScreen",void 0),r([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Common/Common":"Common","./Common/Enum":"Enum","./GameManager":"GameManager","./HomeScript":"HomeScript"}],ShopItem:[function(t,e,o){"use strict";cc._RF.push(e,"53c6adJivhPuY+lYluY1s+p","ShopItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Common/Common"),a=t("./Common/GameConfig"),s=t("./Common/SpriteMgr"),u=t("./ShopScript"),p=cc._decorator,l=p.ccclass,f=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemSp=null,e.itemTag=null,e.itemPrice=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.updateInfo=function(t){this.itemId=t;var e=1==c.default.getExtraItemState()[t],o=cc.find("Canvas").getComponent(s.default),n=(e?o.spriteList:o.shadowList)[t];if(this.itemSp.spriteFrame=n,this.itemTag.active=!e,!e){var i=a.default.ShopItemInfo[t];this.itemPrice.string=""+i,this.price=i}},e.prototype.updateState=function(){this.itemTag.active=!1,c.default.setExtraItemState(this.itemId),this.updateInfo(this.itemId)},e.prototype.onBuyBtnClick=function(){u.default.Instance.onBuyBtnClick(this.price,this)},r([f(cc.Sprite)],e.prototype,"itemSp",void 0),r([f(cc.Node)],e.prototype,"itemTag",void 0),r([f(cc.Label)],e.prototype,"itemPrice",void 0),r([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Common/Common":"Common","./Common/GameConfig":"GameConfig","./Common/SpriteMgr":"SpriteMgr","./ShopScript":"ShopScript"}],ShopScript:[function(t,e,o){"use strict";cc._RF.push(e,"6a734nvTMJD252ULcjVezdR","ShopScript");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Common/Common"),a=t("./Common/Enum"),s=t("./Common/GameConfig"),u=t("./Common/PoolManager"),p=t("./ShopItem"),l=t("./Common/Utilities"),f=t("./HomeScript"),d=t("./Common/PrefabMgr"),h=cc._decorator,m=h.ccclass,y=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tokenNum=null,e.contentNode=null,e.shopItemPrfb=null,e.ShopItemList=[],e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o.Instance=this},e.prototype.onEnable=function(){this.createShopContent(),this.updateToken()},e.prototype.createShopContent=function(){this.contentNode.removeAllChildren();for(var t=0;t<s.default.ShopItemCount;t++)u.default.instance.getNode(this.shopItemPrfb,this.contentNode).getComponent(p.default).updateInfo(t);this.contentNode.width=320*s.default.ShopItemCount},e.prototype.onAddToken=function(){s.default.addTokenAttempts--,c.default.addToken(5),this.updateToken()},e.prototype.ShowAddTokenDlg=function(){c.default.playAudioEffect(a.EAudioEffectID.Click,!1),console.log("onAddToken attempt lefts = ",s.default.addTokenAttempts),s.default.addTokenAttempts<=0||l.default.showDlg(d.default.Instance.tokenConfirm,f.default.instance.UIRoot)},e.prototype.ShowNotEnoughTokenDlg=function(){c.default.playAudioEffect(a.EAudioEffectID.Click,!1),l.default.showDlg(d.default.Instance.notEnoughToken,f.default.instance.UIRoot,cc.v2(0,0),!1)},e.prototype.onBuyBtnClick=function(t,e){c.default.playAudioEffect(a.EAudioEffectID.Click,!1),c.default.getToken()<t?this.ShowNotEnoughTokenDlg():(c.default.addToken(-t),e.updateState(),this.updateToken())},e.prototype.updateToken=function(){var t=c.default.getToken();this.tokenNum.string="x"+t},e.prototype.onCloseShop=function(){c.default.playAudioEffect(a.EAudioEffectID.Click,!1),this.node.active=!1},e.prototype.onLeftBtnClick=function(){c.default.playAudioEffect(a.EAudioEffectID.Click,!1);var t=this.getCenter();t<2||cc.tween(this.contentNode).by(.5,{position:cc.v3(-(this.contentNode.children[t-1].x+this.contentNode.x),0,0)}).start()},e.prototype.onRightBtnClick=function(){c.default.playAudioEffect(a.EAudioEffectID.Click,!1);var t=this.getCenter();t>s.default.ShopItemCount-3||cc.tween(this.contentNode).by(.5,{position:cc.v3(-(this.contentNode.children[t+1].x+this.contentNode.x),0,0)}).start()},e.prototype.getCenter=function(){for(var t,e=1e3,o=0;o<this.contentNode.childrenCount;o++)e>Math.abs(this.contentNode.children[o].x+this.contentNode.x)&&(e=Math.abs(this.contentNode.children[o].x+this.contentNode.x),t=o);return t},r([y(cc.Label)],e.prototype,"tokenNum",void 0),r([y(cc.Node)],e.prototype,"contentNode",void 0),r([y(cc.Prefab)],e.prototype,"shopItemPrfb",void 0),o=r([m],e)}(cc.Component);o.default=g,cc._RF.pop()},{"./Common/Common":"Common","./Common/Enum":"Enum","./Common/GameConfig":"GameConfig","./Common/PoolManager":"PoolManager","./Common/PrefabMgr":"PrefabMgr","./Common/Utilities":"Utilities","./HomeScript":"HomeScript","./ShopItem":"ShopItem"}],SoundManager:[function(t,e,o){"use strict";cc._RF.push(e,"9a522Uwfu1JUJp0tYEzalv6","SoundManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioList=[],e.bgm=null,e}return i(e,t),r([s([cc.AudioClip])],e.prototype,"audioList",void 0),r([s(cc.AudioClip)],e.prototype,"bgm",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],SpriteMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0a495LmgHNHVIVk1GWcKqtg","SpriteMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteList=[],e.shadowList=[],e.dailyRewardList=[],e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o.Instance=this},e.prototype.start=function(){},r([s([cc.SpriteFrame])],e.prototype,"spriteList",void 0),r([s([cc.SpriteFrame])],e.prototype,"shadowList",void 0),r([s([cc.SpriteFrame])],e.prototype,"dailyRewardList",void 0),o=r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],Utilities:[function(t,e,o){"use strict";cc._RF.push(e,"0a304Ms/kdIEqfdWtNuPkUN","Utilities");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.shuffle=o.getTransposeArr=o.pick=o.Matrix2D=o.Queue=o.copyArray=void 0;var i=cc._decorator.ccclass,r=t("./CallNative"),c=function(){function t(){}return t.getRandNum=function(){return Math.random(),-1},t.capture=function(){r.default.onCallNative("SaveImageToLocal","img")},t.dataURLToBlob=function(t){var e=t.split(","),o=e[0].match(/:(.*?);/)[1],n=atob(e[1]);r.default.onCallNative("SaveImageToLocal",n);for(var i=n.length,c=new Uint8Array(i);i--;)c[i]=n.charCodeAt(i);return new Blob([c],{type:o})},t.blankArrayOf=function(t){for(var e=new Array,o=0;o<t;o++)e.push(0);return e},t.randomIntFromInterval=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t.showTexture=function(t,e){if(t){var o=new Image;o.src=e,o.onload=function(){var e=new cc.Texture2D;e.initWithElement(o),e.handleLoadedTexture(),t.spriteFrame=new cc.SpriteFrame(e)}}else console.warn("Need to add a sprite component")},t.showDlg=function(t,e,o,n){void 0===o&&(o=cc.v2(0,0)),void 0===n&&(n=!0);var i=cc.instantiate(t);i.setParent(e),i.setPosition(cc.v2(0,0)),n&&(i.setScale(.5),cc.tween(i).to(.3,{scale:1}).start())},n([i],t)}();o.default=c,o.copyArray=function(t,e){var o=-1,n=t.length;for(e||(e=new Array(n));++o<n;)e[o]=t[o];return e};var a=function(){function t(){this.data=new Map,this.head=0,this.tail=0}return t.prototype.enq=function(t){this.data.set(this.tail,t),this.tail++},t.prototype.deq=function(){if(this.data.has(this.head)){var t=this.data.get(this.head);return this.data.delete(this.head),this.head++,t}return null},t.prototype.size=function(){return this.tail-this.head},t}();o.Queue=a;var s=function(){function t(){this.rows=new Map}return t.prototype.set=function(t,e,o){var n=this.rows.get(t);n||(n=new Map,this.rows.set(t,n)),n.set(e,o)},t.prototype.get=function(t,e){var o=this.rows.get(t);return o&&o.get(e)||null},t.prototype.delete=function(t,e){var o=this.rows.get(t);o&&o.delete(e)},t.prototype.has=function(t,e){var o=this.rows.get(t);return!!o&&o.has(e)},t}();o.Matrix2D=s,o.pick=function(t){return t[Math.floor(Math.random()*t.length)]},o.getTransposeArr=function(t){return t[0].map(function(e,o){return t.map(function(t){return t[o]})})},o.shuffle=function(t){if(null==t||!t.length)return[];t.sort(function(){return Math.random()-.5})},cc._RF.pop()},{"./CallNative":"CallNative"}]},{},["Loading","BoxScript","AutoRemove","CallNative","Common","CustomEventManager","Enum","GameConfig","PoolManager","PrefabMgr","SoundManager","SpriteMgr","Utilities","DailyReward","AddSpace","AddToken","ResetConfirm","EndGameDlg","GameManager","HomeScript","Item","LayerManager","RewardItem","SettingGroup","ShopItem","ShopScript","DontDestroyComponent"]);